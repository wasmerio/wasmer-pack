<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Global functions and abstractions."><title>minijinja::functions - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="minijinja" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../minijinja/index.html"><img src="https://github.com/mitsuhiko/minijinja/raw/main/artwork/logo-square.png" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../minijinja/index.html"><img src="https://github.com/mitsuhiko/minijinja/raw/main/artwork/logo-square.png" alt="logo"></a><h2 class="location"><a href="#">Module functions</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">minijinja</a>::<wbr><a class="mod" href="#">functions</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/minijinja/functions.rs.html#1-319">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Global functions and abstractions.</p>
<p>This module provides the abstractions for functions that can registered as
global functions to the environment via
<a href="../struct.Environment.html#method.add_function" title="method minijinja::Environment::add_function"><code>add_function</code></a>.</p>
<h2 id="using-functions"><a href="#using-functions">Using Functions</a></h2>
<p>Functions can be called in any place where an expression is valid.  They
are useful to retrieve data.  Some functions are special and provided
by the engine (like <code>super</code>) within certain context, others are global.</p>
<p>The following is a motivating example:</p>
<div class="example-wrap"><pre class="language-jinja"><code>&lt;pre&gt;{{ debug() }}&lt;/pre&gt;
</code></pre></div><h2 id="custom-functions"><a href="#custom-functions">Custom Functions</a></h2>
<p>A custom global function is just a simple rust function which accepts optional
arguments and then returns a result.  Global functions are typically used to
perform a data loading operation.  For instance these functions can be used
to expose data to the template that hasn’t been provided by the individual
render invocation.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>minijinja::{Error, ErrorKind};

<span class="kw">fn </span>include_file(name: String) -&gt; <span class="prelude-ty">Result</span>&lt;String, Error&gt; {
    std::fs::read_to_string(<span class="kw-2">&amp;</span>name)
        .map_err(|e| Error::new(
            ErrorKind::InvalidOperation,
            <span class="string">&quot;cannot load file&quot;
        </span>).with_source(e))
}

env.add_function(<span class="string">&quot;include_file&quot;</span>, include_file);</code></pre></div>
<h2 id="note-on-keyword-arguments"><a href="#note-on-keyword-arguments">Note on Keyword Arguments</a></h2>
<p>MiniJinja inherits a lot of the runtime model from Jinja2.  That includes support for
keyword arguments.  These however are a concept not native to Rust which makes them
somewhat unconfortable to work with.  In MiniJinja keyword arguments are implemented by
converting them into an extra parameter represented by a map.  That means if you call
a function as <code>foo(1, 2, three=3, four=4)</code> the function gets three arguments:</p>
<div class="example-wrap"><pre class="language-json"><code>[1, 2, {&quot;three&quot;: 3, &quot;four&quot;: 4}]
</code></pre></div>
<p>If a function wants to disambiugate between a value passed as keyword argument or not,
the the <a href="../value/struct.Value.html#method.is_kwargs" title="method minijinja::value::Value::is_kwargs"><code>Value::is_kwargs</code></a> can be used which returns <code>true</code> if a value represents
keyword arguments as opposed to just a map.  A more convenient way to work with keyword
arguments is the <a href="../value/struct.Kwargs.html" title="struct minijinja::value::Kwargs"><code>Kwargs</code></a> type.</p>
<h2 id="built-in-functions"><a href="#built-in-functions">Built-in Functions</a></h2>
<p>When the <code>builtins</code> feature is enabled a range of built-in functions are
automatically added to the environment.  These are also all provided in
this module.  Note though that these functions are not to be
called from Rust code as their exact interface (arguments and return types)
might change from one MiniJinja version to another.</p>
</div></details><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Function.html" title="trait minijinja::functions::Function">Function</a></div><div class="desc docblock-short">A utility trait that represents global functions.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.debug.html" title="fn minijinja::functions::debug">debug</a></div><div class="desc docblock-short">Outputs the current context stringified.</div></li><li><div class="item-name"><a class="fn" href="fn.dict.html" title="fn minijinja::functions::dict">dict</a></div><div class="desc docblock-short">Creates a dictionary.</div></li><li><div class="item-name"><a class="fn" href="fn.range.html" title="fn minijinja::functions::range">range</a></div><div class="desc docblock-short">Returns a range.</div></li></ul></section></div></main></body></html>